{"text": "2025-09-03 13:40:55.051 | INFO     | app.core.logging_config:setup_logging:94 - Logging configured\n", "record": {"elapsed": {"repr": "0:00:03.858621", "seconds": 3.858621}, "exception": null, "extra": {"extra": {"environment": "<MagicMock name='settings.ENVIRONMENT' id='132970573088816'>", "log_level": "INFO", "log_file": "MagicMock/settings.get_log_file_path()/132970562661136", "log_format": "json"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "setup_logging", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 94, "message": "Logging configured", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970656193408, "name": "MainThread"}, "time": {"repr": "2025-09-03 13:40:55.051315+00:00", "timestamp": 1756906855.051315}}}
{"text": "2025-09-03 13:40:55.052 | INFO     | tests.test_logging_error_verification:test_structured_logging_format:74 - Test structured log\n", "record": {"elapsed": {"repr": "0:00:03.859343", "seconds": 3.859343}, "exception": null, "extra": {"logger_name": "test_structured", "extra": {"user_id": "user123", "action": "test_action", "details": {"key": "value"}}}, "file": {"name": "test_logging_error_verification.py", "path": "/app/tests/test_logging_error_verification.py"}, "function": "test_structured_logging_format", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 74, "message": "Test structured log", "module": "test_logging_error_verification", "name": "tests.test_logging_error_verification", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970656193408, "name": "MainThread"}, "time": {"repr": "2025-09-03 13:40:55.052037+00:00", "timestamp": 1756906855.052037}}}
{"text": "2025-09-03 13:40:55.090 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:03.897641", "seconds": 3.897641}, "exception": null, "extra": {"extra": {"request_id": "a0f0b7de-433e-4e29-a739-6c66acee1907", "method": "GET", "url": "http://testserver/api/v1/test-errors/app-exception", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.090317+00:00", "exception_message": "This is a test validation error", "error_code": "VALIDATION_ERROR", "status_code": 422, "details": {"field": "test_field", "value": "invalid_value"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fc086e0"}, "time": {"repr": "2025-09-03 13:40:55.090335+00:00", "timestamp": 1756906855.090335}}}
{"text": "2025-09-03 13:40:55.149 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/app-exception\n", "record": {"elapsed": {"repr": "0:00:03.956430", "seconds": 3.95643}, "exception": null, "extra": {"extra": {"request_id": "3728d275-b7b5-4395-b264-58ca6e31c0cd", "method": "GET", "path": "/api/v1/test-errors/app-exception", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/app-exception", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a9430"}, "time": {"repr": "2025-09-03 13:40:55.149124+00:00", "timestamp": 1756906855.149124}}}
{"text": "2025-09-03 13:40:55.149 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:03.957019", "seconds": 3.957019}, "exception": null, "extra": {"extra": {"request_id": "39067240-4a8e-455b-8b63-8267bf12cae0", "method": "GET", "url": "http://testserver/api/v1/test-errors/app-exception", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.149700+00:00", "exception_message": "This is a test validation error", "error_code": "VALIDATION_ERROR", "status_code": 422, "details": {"field": "test_field", "value": "invalid_value"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a9430"}, "time": {"repr": "2025-09-03 13:40:55.149713+00:00", "timestamp": 1756906855.149713}}}
{"text": "2025-09-03 13:40:55.150 | WARNING  | app.core.logging_config:log_response:207 - Request completed: 422 (1.14ms)\n", "record": {"elapsed": {"repr": "0:00:03.957582", "seconds": 3.957582}, "exception": null, "extra": {"extra": {"request_id": "3728d275-b7b5-4395-b264-58ca6e31c0cd", "status_code": 422, "duration_ms": 1.1441707611083984, "response_size": 228}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 207, "message": "Request completed: 422 (1.14ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a9430"}, "time": {"repr": "2025-09-03 13:40:55.150276+00:00", "timestamp": 1756906855.150276}}}
{"text": "2025-09-03 13:40:55.154 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/http-exception\n", "record": {"elapsed": {"repr": "0:00:03.962044", "seconds": 3.962044}, "exception": null, "extra": {"extra": {"request_id": "13d79432-f06c-42a4-8ab9-2fe4f86116c1", "method": "GET", "path": "/api/v1/test-errors/http-exception", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/http-exception", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcbbe00"}, "time": {"repr": "2025-09-03 13:40:55.154738+00:00", "timestamp": 1756906855.154738}}}
{"text": "2025-09-03 13:40:55.155 | WARNING  | app.middleware.error_handler:_log_http_exception:315 - HTTP exception occurred\n", "record": {"elapsed": {"repr": "0:00:03.963124", "seconds": 3.963124}, "exception": null, "extra": {"extra": {"request_id": "027e3abd-d2c8-42cd-94fa-15e94d0efc36", "method": "GET", "url": "http://testserver/api/v1/test-errors/http-exception", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.155804+00:00", "exception_detail": "Test resource not found", "status_code": 404}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_http_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 315, "message": "HTTP exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcbbe00"}, "time": {"repr": "2025-09-03 13:40:55.155818+00:00", "timestamp": 1756906855.155818}}}
{"text": "2025-09-03 13:40:55.156 | WARNING  | app.core.logging_config:log_response:207 - Request completed: 404 (1.53ms)\n", "record": {"elapsed": {"repr": "0:00:03.963602", "seconds": 3.963602}, "exception": null, "extra": {"extra": {"request_id": "13d79432-f06c-42a4-8ab9-2fe4f86116c1", "status_code": 404, "duration_ms": 1.5311241149902344, "response_size": 187}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 207, "message": "Request completed: 404 (1.53ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcbbe00"}, "time": {"repr": "2025-09-03 13:40:55.156296+00:00", "timestamp": 1756906855.156296}}}
{"text": "2025-09-03 13:40:55.173 | INFO     | app.core.logging_config:log_request:172 - Request started: POST /api/v1/test-errors/validation-error\n", "record": {"elapsed": {"repr": "0:00:03.980339", "seconds": 3.980339}, "exception": null, "extra": {"extra": {"request_id": "d4c48e82-9983-46e0-8bc8-a0df9b40fedb", "method": "POST", "path": "/api/v1/test-errors/validation-error", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: POST /api/v1/test-errors/validation-error", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcbb710"}, "time": {"repr": "2025-09-03 13:40:55.173033+00:00", "timestamp": 1756906855.173033}}}
{"text": "2025-09-03 13:40:55.174 | WARNING  | app.middleware.error_handler:_log_validation_exception:329 - Validation exception occurred\n", "record": {"elapsed": {"repr": "0:00:03.981511", "seconds": 3.981511}, "exception": null, "extra": {"extra": {"request_id": "727f0384-2e89-43ac-aa92-0a2393ef0870", "method": "POST", "url": "http://testserver/api/v1/test-errors/validation-error", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient", "content-length": "44", "content-type": "application/json"}, "timestamp": "2025-09-03T13:40:55.174181+00:00", "exception_message": "[{'type': 'string_too_short', 'loc': ('body', 'name'), 'msg': 'String should have at least 1 character', 'input': '', 'ctx': {'min_length': 1}}, {'type': 'string_pattern_mismatch', 'loc': ('body', 'email'), 'msg': \"String should match pattern '^[^@]+@[^@]+\\\\.[^@]+$'\", 'input': 'invalid-email', 'ctx': {'pattern': '^[^@]+@[^@]+\\\\.[^@]+$'}}, {'type': 'greater_than_equal', 'loc': ('body', 'age'), 'msg': 'Input should be greater than or equal to 0', 'input': -5, 'ctx': {'ge': 0}}]", "validation_errors": [{"type": "string_too_short", "loc": ["body", "name"], "msg": "String should have at least 1 character", "input": "", "ctx": {"min_length": 1}}, {"type": "string_pattern_mismatch", "loc": ["body", "email"], "msg": "String should match pattern '^[^@]+@[^@]+\\.[^@]+$'", "input": "invalid-email", "ctx": {"pattern": "^[^@]+@[^@]+\\.[^@]+$"}}, {"type": "greater_than_equal", "loc": ["body", "age"], "msg": "Input should be greater than or equal to 0", "input": -5, "ctx": {"ge": 0}}]}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_validation_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 329, "message": "Validation exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcbb710"}, "time": {"repr": "2025-09-03 13:40:55.174205+00:00", "timestamp": 1756906855.174205}}}
{"text": "2025-09-03 13:40:55.174 | WARNING  | app.core.logging_config:log_response:207 - Request completed: 422 (1.66ms)\n", "record": {"elapsed": {"repr": "0:00:03.982010", "seconds": 3.98201}, "exception": null, "extra": {"extra": {"request_id": "d4c48e82-9983-46e0-8bc8-a0df9b40fedb", "status_code": 422, "duration_ms": 1.6629695892333984, "response_size": 494}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 207, "message": "Request completed: 422 (1.66ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcbb710"}, "time": {"repr": "2025-09-03 13:40:55.174704+00:00", "timestamp": 1756906855.174704}}}
{"text": "2025-09-03 13:40:55.178 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/unexpected-error\n", "record": {"elapsed": {"repr": "0:00:03.985888", "seconds": 3.985888}, "exception": null, "extra": {"extra": {"request_id": "e3b1fc6f-be3d-4446-8971-91e0739ac60f", "method": "GET", "path": "/api/v1/test-errors/unexpected-error", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/unexpected-error", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fd2f560"}, "time": {"repr": "2025-09-03 13:40:55.178582+00:00", "timestamp": 1756906855.178582}}}
{"text": "2025-09-03 13:40:55.183 | ERROR    | app.middleware.error_handler:_log_exception:198 - Unexpected exception occurred\n", "record": {"elapsed": {"repr": "0:00:03.990584", "seconds": 3.990584}, "exception": null, "extra": {"extra": {"request_id": "e6e35442-b612-47f3-b991-a387792bfb23", "method": "GET", "url": "http://testserver/api/v1/test-errors/unexpected-error", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "exception_type": "ZeroDivisionError", "timestamp": "2025-09-03T13:40:55.179317+00:00", "exception_message": "division by zero", "traceback": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/anyio/streams/memory.py\", line 111, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/anyio/streams/memory.py\", line 104, in receive_nowait\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/app/middleware/error_handler.py\", line 30, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py\", line 159, in call_next\n    raise app_exc\n  File \"/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"c:\\Users\\User\\Desktop\\新增資料夾\\python-fastapi-demo\\backend\\app\\api\\v1\\test_errors.py\", line 84, in test_unexpected_error\nZeroDivisionError: division by zero\n"}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_exception", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 198, "message": "Unexpected exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fd2f560"}, "time": {"repr": "2025-09-03 13:40:55.183278+00:00", "timestamp": 1756906855.183278}}}
{"text": "2025-09-03 13:40:55.184 | ERROR    | app.core.logging_config:log_response:207 - Request completed: 500 (5.68ms)\n", "record": {"elapsed": {"repr": "0:00:03.991581", "seconds": 3.991581}, "exception": null, "extra": {"extra": {"request_id": "e3b1fc6f-be3d-4446-8971-91e0739ac60f", "status_code": 500, "duration_ms": 5.681514739990234, "response_size": 212}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 207, "message": "Request completed: 500 (5.68ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fd2f560"}, "time": {"repr": "2025-09-03 13:40:55.184275+00:00", "timestamp": 1756906855.184275}}}
{"text": "2025-09-03 13:40:55.190 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/business-logic-error\n", "record": {"elapsed": {"repr": "0:00:03.997589", "seconds": 3.997589}, "exception": null, "extra": {"extra": {"request_id": "c2fd702b-708b-49c5-b542-8d571bed76a6", "method": "GET", "path": "/api/v1/test-errors/business-logic-error", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/business-logic-error", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fd2d910"}, "time": {"repr": "2025-09-03 13:40:55.190283+00:00", "timestamp": 1756906855.190283}}}
{"text": "2025-09-03 13:40:55.190 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:03.998241", "seconds": 3.998241}, "exception": null, "extra": {"extra": {"request_id": "82f56433-628c-4cba-8ee8-861e12618239", "method": "GET", "url": "http://testserver/api/v1/test-errors/business-logic-error", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.190921+00:00", "exception_message": "Business rule violation", "error_code": "BUSINESS_LOGIC_ERROR", "status_code": 400, "details": {"rule": "test_rule", "violation": "test_violation"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fd2d910"}, "time": {"repr": "2025-09-03 13:40:55.190935+00:00", "timestamp": 1756906855.190935}}}
{"text": "2025-09-03 13:40:55.191 | WARNING  | app.core.logging_config:log_response:207 - Request completed: 400 (1.18ms)\n", "record": {"elapsed": {"repr": "0:00:03.998778", "seconds": 3.998778}, "exception": null, "extra": {"extra": {"request_id": "c2fd702b-708b-49c5-b542-8d571bed76a6", "status_code": 400, "duration_ms": 1.1832714080810547, "response_size": 227}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 207, "message": "Request completed: 400 (1.18ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fd2d910"}, "time": {"repr": "2025-09-03 13:40:55.191472+00:00", "timestamp": 1756906855.191472}}}
{"text": "2025-09-03 13:40:55.207 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/database-error\n", "record": {"elapsed": {"repr": "0:00:04.014852", "seconds": 4.014852}, "exception": null, "extra": {"extra": {"request_id": "29110739-9c62-4cdb-a878-74d254116eea", "method": "GET", "path": "/api/v1/test-errors/database-error", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/database-error", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcb96a0"}, "time": {"repr": "2025-09-03 13:40:55.207546+00:00", "timestamp": 1756906855.207546}}}
{"text": "2025-09-03 13:40:55.209 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.016759", "seconds": 4.016759}, "exception": null, "extra": {"extra": {"request_id": "65c0790e-3066-4ad4-ae8f-dead491aac51", "method": "GET", "url": "http://testserver/api/v1/test-errors/database-error", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.209435+00:00", "exception_message": "Database connection failed", "error_code": "DATABASE_ERROR", "status_code": 500, "details": {"operation": "select", "table": "test_table"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcb96a0"}, "time": {"repr": "2025-09-03 13:40:55.209453+00:00", "timestamp": 1756906855.209453}}}
{"text": "2025-09-03 13:40:55.210 | ERROR    | app.core.logging_config:log_response:207 - Request completed: 500 (2.59ms)\n", "record": {"elapsed": {"repr": "0:00:04.017450", "seconds": 4.01745}, "exception": null, "extra": {"extra": {"request_id": "29110739-9c62-4cdb-a878-74d254116eea", "status_code": 500, "duration_ms": 2.586841583251953, "response_size": 218}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 207, "message": "Request completed: 500 (2.59ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcb96a0"}, "time": {"repr": "2025-09-03 13:40:55.210144+00:00", "timestamp": 1756906855.210144}}}
{"text": "2025-09-03 13:40:55.214 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/external-service-error\n", "record": {"elapsed": {"repr": "0:00:04.021623", "seconds": 4.021623}, "exception": null, "extra": {"extra": {"request_id": "e2df1ddc-6395-4fa1-8ffe-329b613b2cb0", "method": "GET", "path": "/api/v1/test-errors/external-service-error", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/external-service-error", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcba270"}, "time": {"repr": "2025-09-03 13:40:55.214317+00:00", "timestamp": 1756906855.214317}}}
{"text": "2025-09-03 13:40:55.214 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.022153", "seconds": 4.022153}, "exception": null, "extra": {"extra": {"request_id": "557e3a9b-9c35-489a-adc1-a8218182529e", "method": "GET", "url": "http://testserver/api/v1/test-errors/external-service-error", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.214836+00:00", "exception_message": "External API is unavailable", "error_code": "EXTERNAL_SERVICE_ERROR", "status_code": 502, "details": {"service": "test_api", "endpoint": "/test"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcba270"}, "time": {"repr": "2025-09-03 13:40:55.214847+00:00", "timestamp": 1756906855.214847}}}
{"text": "2025-09-03 13:40:55.215 | ERROR    | app.core.logging_config:log_response:207 - Request completed: 502 (0.96ms)\n", "record": {"elapsed": {"repr": "0:00:04.022593", "seconds": 4.022593}, "exception": null, "extra": {"extra": {"request_id": "e2df1ddc-6395-4fa1-8ffe-329b613b2cb0", "status_code": 502, "duration_ms": 0.9622573852539062, "response_size": 225}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 207, "message": "Request completed: 502 (0.96ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcba270"}, "time": {"repr": "2025-09-03 13:40:55.215287+00:00", "timestamp": 1756906855.215287}}}
{"text": "2025-09-03 13:40:55.220 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/app-exception\n", "record": {"elapsed": {"repr": "0:00:04.027750", "seconds": 4.02775}, "exception": null, "extra": {"extra": {"request_id": "464e0405-49dd-4f64-9f8a-773946837a6c", "method": "GET", "path": "/api/v1/test-errors/app-exception", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/app-exception", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a9460"}, "time": {"repr": "2025-09-03 13:40:55.220444+00:00", "timestamp": 1756906855.220444}}}
{"text": "2025-09-03 13:40:55.221 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.028351", "seconds": 4.028351}, "exception": null, "extra": {"extra": {"request_id": "ee4f78a8-115d-4e5d-9fd2-e0fedbc102a8", "method": "GET", "url": "http://testserver/api/v1/test-errors/app-exception", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.221033+00:00", "exception_message": "This is a test validation error", "error_code": "VALIDATION_ERROR", "status_code": 422, "details": {"field": "test_field", "value": "invalid_value"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a9460"}, "time": {"repr": "2025-09-03 13:40:55.221045+00:00", "timestamp": 1756906855.221045}}}
{"text": "2025-09-03 13:40:55.221 | WARNING  | app.core.logging_config:log_response:207 - Request completed: 422 (1.17ms)\n", "record": {"elapsed": {"repr": "0:00:04.028926", "seconds": 4.028926}, "exception": null, "extra": {"extra": {"request_id": "464e0405-49dd-4f64-9f8a-773946837a6c", "status_code": 422, "duration_ms": 1.1703968048095703, "response_size": 228}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 207, "message": "Request completed: 422 (1.17ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a9460"}, "time": {"repr": "2025-09-03 13:40:55.221620+00:00", "timestamp": 1756906855.22162}}}
{"text": "2025-09-03 13:40:55.224 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/http-exception\n", "record": {"elapsed": {"repr": "0:00:04.031814", "seconds": 4.031814}, "exception": null, "extra": {"extra": {"request_id": "b3e3217c-95c1-4bec-865c-74687f935628", "method": "GET", "path": "/api/v1/test-errors/http-exception", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/http-exception", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcba0c0"}, "time": {"repr": "2025-09-03 13:40:55.224508+00:00", "timestamp": 1756906855.224508}}}
{"text": "2025-09-03 13:40:55.225 | WARNING  | app.middleware.error_handler:_log_http_exception:315 - HTTP exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.033207", "seconds": 4.033207}, "exception": null, "extra": {"extra": {"request_id": "27320ea2-b312-4f0a-a6d5-af35b8893495", "method": "GET", "url": "http://testserver/api/v1/test-errors/http-exception", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.225882+00:00", "exception_detail": "Test resource not found", "status_code": 404}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_http_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 315, "message": "HTTP exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcba0c0"}, "time": {"repr": "2025-09-03 13:40:55.225901+00:00", "timestamp": 1756906855.225901}}}
{"text": "2025-09-03 13:40:55.226 | WARNING  | app.core.logging_config:log_response:207 - Request completed: 404 (1.91ms)\n", "record": {"elapsed": {"repr": "0:00:04.033727", "seconds": 4.033727}, "exception": null, "extra": {"extra": {"request_id": "b3e3217c-95c1-4bec-865c-74687f935628", "status_code": 404, "duration_ms": 1.9073486328125, "response_size": 187}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 207, "message": "Request completed: 404 (1.91ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcba0c0"}, "time": {"repr": "2025-09-03 13:40:55.226421+00:00", "timestamp": 1756906855.226421}}}
{"text": "2025-09-03 13:40:55.228 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/business-logic-error\n", "record": {"elapsed": {"repr": "0:00:04.035908", "seconds": 4.035908}, "exception": null, "extra": {"extra": {"request_id": "372d5fe1-f85c-403f-b094-46c869741561", "method": "GET", "path": "/api/v1/test-errors/business-logic-error", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/business-logic-error", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcb9610"}, "time": {"repr": "2025-09-03 13:40:55.228602+00:00", "timestamp": 1756906855.228602}}}
{"text": "2025-09-03 13:40:55.229 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.037202", "seconds": 4.037202}, "exception": null, "extra": {"extra": {"request_id": "70788f4e-a4be-487e-9f16-fa8c32a455b2", "method": "GET", "url": "http://testserver/api/v1/test-errors/business-logic-error", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.229870+00:00", "exception_message": "Business rule violation", "error_code": "BUSINESS_LOGIC_ERROR", "status_code": 400, "details": {"rule": "test_rule", "violation": "test_violation"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcb9610"}, "time": {"repr": "2025-09-03 13:40:55.229896+00:00", "timestamp": 1756906855.229896}}}
{"text": "2025-09-03 13:40:55.230 | WARNING  | app.core.logging_config:log_response:207 - Request completed: 400 (2.22ms)\n", "record": {"elapsed": {"repr": "0:00:04.038154", "seconds": 4.038154}, "exception": null, "extra": {"extra": {"request_id": "372d5fe1-f85c-403f-b094-46c869741561", "status_code": 400, "duration_ms": 2.2161006927490234, "response_size": 227}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 207, "message": "Request completed: 400 (2.22ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcb9610"}, "time": {"repr": "2025-09-03 13:40:55.230848+00:00", "timestamp": 1756906855.230848}}}
{"text": "2025-09-03 13:40:55.232 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/database-error\n", "record": {"elapsed": {"repr": "0:00:04.040273", "seconds": 4.040273}, "exception": null, "extra": {"extra": {"request_id": "8b0cd8f1-cbd0-4414-8af6-4c72352ffec7", "method": "GET", "path": "/api/v1/test-errors/database-error", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/database-error", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1aa7e0"}, "time": {"repr": "2025-09-03 13:40:55.232967+00:00", "timestamp": 1756906855.232967}}}
{"text": "2025-09-03 13:40:55.233 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.040747", "seconds": 4.040747}, "exception": null, "extra": {"extra": {"request_id": "6548882b-fd0c-4d67-b327-d02b45f2eddf", "method": "GET", "url": "http://testserver/api/v1/test-errors/database-error", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.233432+00:00", "exception_message": "Database connection failed", "error_code": "DATABASE_ERROR", "status_code": 500, "details": {"operation": "select", "table": "test_table"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1aa7e0"}, "time": {"repr": "2025-09-03 13:40:55.233441+00:00", "timestamp": 1756906855.233441}}}
{"text": "2025-09-03 13:40:55.233 | ERROR    | app.core.logging_config:log_response:207 - Request completed: 500 (0.80ms)\n", "record": {"elapsed": {"repr": "0:00:04.041080", "seconds": 4.04108}, "exception": null, "extra": {"extra": {"request_id": "8b0cd8f1-cbd0-4414-8af6-4c72352ffec7", "status_code": 500, "duration_ms": 0.80108642578125, "response_size": 218}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 207, "message": "Request completed: 500 (0.80ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1aa7e0"}, "time": {"repr": "2025-09-03 13:40:55.233774+00:00", "timestamp": 1756906855.233774}}}
{"text": "2025-09-03 13:40:55.235 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/external-service-error\n", "record": {"elapsed": {"repr": "0:00:04.043131", "seconds": 4.043131}, "exception": null, "extra": {"extra": {"request_id": "28cf1b26-a15c-408f-af25-117615125867", "method": "GET", "path": "/api/v1/test-errors/external-service-error", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/external-service-error", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a8350"}, "time": {"repr": "2025-09-03 13:40:55.235825+00:00", "timestamp": 1756906855.235825}}}
{"text": "2025-09-03 13:40:55.236 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.043743", "seconds": 4.043743}, "exception": null, "extra": {"extra": {"request_id": "eb6e9ed5-8642-4fb7-8166-4ac2186bbe04", "method": "GET", "url": "http://testserver/api/v1/test-errors/external-service-error", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.236424+00:00", "exception_message": "External API is unavailable", "error_code": "EXTERNAL_SERVICE_ERROR", "status_code": 502, "details": {"service": "test_api", "endpoint": "/test"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a8350"}, "time": {"repr": "2025-09-03 13:40:55.236437+00:00", "timestamp": 1756906855.236437}}}
{"text": "2025-09-03 13:40:55.237 | ERROR    | app.core.logging_config:log_response:207 - Request completed: 502 (1.36ms)\n", "record": {"elapsed": {"repr": "0:00:04.044499", "seconds": 4.044499}, "exception": null, "extra": {"extra": {"request_id": "28cf1b26-a15c-408f-af25-117615125867", "status_code": 502, "duration_ms": 1.3599395751953125, "response_size": 225}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 207, "message": "Request completed: 502 (1.36ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a8350"}, "time": {"repr": "2025-09-03 13:40:55.237193+00:00", "timestamp": 1756906855.237193}}}
{"text": "2025-09-03 13:40:55.239 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/unexpected-error\n", "record": {"elapsed": {"repr": "0:00:04.046981", "seconds": 4.046981}, "exception": null, "extra": {"extra": {"request_id": "f2a87d4a-c8ef-4d46-8159-a92ada932441", "method": "GET", "path": "/api/v1/test-errors/unexpected-error", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/unexpected-error", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a7500"}, "time": {"repr": "2025-09-03 13:40:55.239675+00:00", "timestamp": 1756906855.239675}}}
{"text": "2025-09-03 13:40:55.243 | ERROR    | app.middleware.error_handler:_log_exception:198 - Unexpected exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.051062", "seconds": 4.051062}, "exception": null, "extra": {"extra": {"request_id": "489cf178-e8f6-4edd-b636-658fc342ee59", "method": "GET", "url": "http://testserver/api/v1/test-errors/unexpected-error", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "exception_type": "ZeroDivisionError", "timestamp": "2025-09-03T13:40:55.240321+00:00", "exception_message": "division by zero", "traceback": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py\", line 151, in call_next\n    message = await recv_stream.receive()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/anyio/streams/memory.py\", line 111, in receive\n    return self.receive_nowait()\n           ^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/anyio/streams/memory.py\", line 104, in receive_nowait\n    raise EndOfStream\nanyio.EndOfStream\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/app/app/middleware/error_handler.py\", line 30, in dispatch\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py\", line 159, in call_next\n    raise app_exc\n  File \"/usr/local/lib/python3.12/site-packages/starlette/middleware/base.py\", line 144, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/middleware/exceptions.py\", line 63, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/routing.py\", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/routing.py\", line 736, in app\n    await route.handle(scope, receive, send)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/routing.py\", line 290, in handle\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/routing.py\", line 78, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 53, in wrapped_app\n    raise exc\n  File \"/usr/local/lib/python3.12/site-packages/starlette/_exception_handler.py\", line 42, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/usr/local/lib/python3.12/site-packages/starlette/routing.py\", line 75, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/fastapi/routing.py\", line 302, in app\n    raw_response = await run_endpoint_function(\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.12/site-packages/fastapi/routing.py\", line 213, in run_endpoint_function\n    return await dependant.call(**values)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"c:\\Users\\User\\Desktop\\新增資料夾\\python-fastapi-demo\\backend\\app\\api\\v1\\test_errors.py\", line 84, in test_unexpected_error\nZeroDivisionError: division by zero\n"}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_exception", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 198, "message": "Unexpected exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a7500"}, "time": {"repr": "2025-09-03 13:40:55.243756+00:00", "timestamp": 1756906855.243756}}}
{"text": "2025-09-03 13:40:55.244 | ERROR    | app.core.logging_config:log_response:207 - Request completed: 500 (4.84ms)\n", "record": {"elapsed": {"repr": "0:00:04.051830", "seconds": 4.05183}, "exception": null, "extra": {"extra": {"request_id": "f2a87d4a-c8ef-4d46-8159-a92ada932441", "status_code": 500, "duration_ms": 4.839420318603516, "response_size": 212}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 207, "message": "Request completed: 500 (4.84ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a7500"}, "time": {"repr": "2025-09-03 13:40:55.244524+00:00", "timestamp": 1756906855.244524}}}
{"text": "2025-09-03 13:40:55.251 | INFO     | app.core.logging_config:log_request:172 - Request started: GET /api/v1/test-errors/app-exception\n", "record": {"elapsed": {"repr": "0:00:04.059028", "seconds": 4.059028}, "exception": null, "extra": {"extra": {"request_id": "44da3c54-10f0-406b-84f5-5010a7e91a8b", "method": "GET", "path": "/api/v1/test-errors/app-exception", "client_ip": "testclient", "user_agent": "testclient"}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_request", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 172, "message": "Request started: GET /api/v1/test-errors/app-exception", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcba840"}, "time": {"repr": "2025-09-03 13:40:55.251722+00:00", "timestamp": 1756906855.251722}}}
{"text": "2025-09-03 13:40:55.252 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.059638", "seconds": 4.059638}, "exception": null, "extra": {"extra": {"request_id": "b9373c26-b6eb-4ce8-923f-ceb6ce30f4cf", "method": "GET", "url": "http://testserver/api/v1/test-errors/app-exception", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.252320+00:00", "exception_message": "This is a test validation error", "error_code": "VALIDATION_ERROR", "status_code": 422, "details": {"field": "test_field", "value": "invalid_value"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcba840"}, "time": {"repr": "2025-09-03 13:40:55.252332+00:00", "timestamp": 1756906855.252332}}}
{"text": "2025-09-03 13:40:55.252 | WARNING  | app.core.logging_config:log_response:207 - Request completed: 422 (1.00ms)\n", "record": {"elapsed": {"repr": "0:00:04.060031", "seconds": 4.060031}, "exception": null, "extra": {"extra": {"request_id": "44da3c54-10f0-406b-84f5-5010a7e91a8b", "status_code": 422, "duration_ms": 0.9977817535400391, "response_size": 228}}, "file": {"name": "logging_config.py", "path": "/app/app/core/logging_config.py"}, "function": "log_response", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 207, "message": "Request completed: 422 (1.00ms)", "module": "logging_config", "name": "app.core.logging_config", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcba840"}, "time": {"repr": "2025-09-03 13:40:55.252725+00:00", "timestamp": 1756906855.252725}}}
{"text": "2025-09-03 13:40:55.258 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.065307", "seconds": 4.065307}, "exception": null, "extra": {"extra": {"request_id": "efbab3a4-d7f7-4ba2-9e28-2ce377890d49", "method": "GET", "url": "http://testserver/api/v1/test-errors/app-exception", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient", "authorization": "[REDACTED]"}, "timestamp": "2025-09-03T13:40:55.257986+00:00", "exception_message": "This is a test validation error", "error_code": "VALIDATION_ERROR", "status_code": 422, "details": {"field": "test_field", "value": "invalid_value"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9f1a4380"}, "time": {"repr": "2025-09-03 13:40:55.258001+00:00", "timestamp": 1756906855.258001}}}
{"text": "2025-09-03 13:40:55.303 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.111258", "seconds": 4.111258}, "exception": null, "extra": {"extra": {"request_id": "8bcdbf6a-4476-4618-adad-52e5f2510fb4", "method": "GET", "url": "http://testserver/api/v1/test-errors/app-exception", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.303936+00:00", "exception_message": "This is a test validation error", "error_code": "VALIDATION_ERROR", "status_code": 422, "details": {"field": "test_field", "value": "invalid_value"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fd30e00"}, "time": {"repr": "2025-09-03 13:40:55.303952+00:00", "timestamp": 1756906855.303952}}}
{"text": "2025-09-03 13:40:55.342 | WARNING  | app.middleware.error_handler:_log_app_exception:343 - Application exception occurred\n", "record": {"elapsed": {"repr": "0:00:04.149767", "seconds": 4.149767}, "exception": null, "extra": {"extra": {"request_id": "81080974-fd6f-483f-b6ad-be5ed7fe80ef", "method": "GET", "url": "http://testserver/api/v1/test-errors/app-exception", "headers": {"host": "testserver", "accept": "*/*", "accept-encoding": "gzip, deflate", "connection": "keep-alive", "user-agent": "testclient"}, "timestamp": "2025-09-03T13:40:55.342440+00:00", "exception_message": "This is a test validation error", "error_code": "VALIDATION_ERROR", "status_code": 422, "details": {"field": "test_field", "value": "invalid_value"}}}, "file": {"name": "error_handler.py", "path": "/app/app/middleware/error_handler.py"}, "function": "_log_app_exception", "level": {"icon": "⚠️", "name": "WARNING", "no": 30}, "line": 343, "message": "Application exception occurred", "module": "error_handler", "name": "app.middleware.error_handler", "process": {"id": 233, "name": "MainProcess"}, "thread": {"id": 132970560706240, "name": "asyncio-portal-78ef9fcd3da0"}, "time": {"repr": "2025-09-03 13:40:55.342461+00:00", "timestamp": 1756906855.342461}}}
